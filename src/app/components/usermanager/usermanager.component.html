<!-- User Manager Component -->

<h2>Search Users</h2>
<form (ngSubmit)="searchUsers(currentSearch)" class="search-form">
  <div class="form-group">
    <label for="searchName">Name:</label>
    <input id="searchName" [(ngModel)]="currentSearch.name" name="searchName">
  </div>

  <div class="form-group">
    <label for="searchRole">Role:</label>
    <input id="searchRole" [(ngModel)]="currentSearch.role" name="searchRole">
  </div>

  <button [disabled]="editingIndex !== null" type="submit">Search</button>
</form>

<h2>Users List</h2>
<button (click)="toggleAddUserForm()" [disabled]="editingIndex !== null">Add New User</button>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Role</th>
      <th>Enabled</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of users; let i = index">
      <ng-container *ngIf="editingIndex === i; else viewMode">
        <td><input type="text" [(ngModel)]="user.name" required></td>
        <td><input type="text" [(ngModel)]="user.role" required></td>
        <td><input type="checkbox" [(ngModel)]="user.enabled"></td>
        <td>
          <button (click)="updateUser(user)">Save</button>
          <button (click)="cancelEdit()">Cancel</button>
        </td>
      </ng-container>
      <ng-template #viewMode>
        <td>{{ user.name }}</td>
        <td>{{ user.role }}</td>
        <td>Enabled: {{ user.enabled ? 'Yes' : 'No' }}</td>
        <td>
          <button (click)="startEdit(i)" [disabled]="editingIndex !== null && editingIndex !== i">Edit</button>
          <button (click)="deleteUser(user.id)" [disabled]="editingIndex !== null">Delete</button>
        </td>
      </ng-template>
    </tr>
    <tr *ngIf="showAddUserForm"  [class.disabled]="editingIndex !== null">
        <td><input type="text" id="name" [(ngModel)]="newUser.name" name="name" required></td>
      
        <td><input type="text" id="role" [(ngModel)]="newUser.role" name="role" required>        </td>
      
        <td>
          <input type="checkbox" id="enabled" [(ngModel)]="newUser.enabled" name="enabled">
        </td>
      <td>
        <button type="submit" (click)="addUserFormSubmit()" [disabled]="editingIndex !== null">Add User</button>
        <button (click)="toggleAddUserForm()">Cancel</button>
      </td>
        
    </tr>
  </tbody>
</table>
